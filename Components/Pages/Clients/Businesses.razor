<!-- File: Components/Pages/Clients.razor -->
@page "/clients/businesses"

@using Mantis.Domain.Clients.Models
@using Mantis.Domain.Clients.Services

@inject ClientService ClientService

<RadzenDataGrid @ref="grid" TItem="Client" Data="@clients" Count="@count" AllowPaging="true" PageSize="10" AllowSorting="true" AllowFiltering="true" LoadData="@LoadData">
    <Columns>
        <RadzenDataGridColumn TItem="Client" Property="Id" Title="ID" Filterable="false" Sortable="false" />
        <RadzenDataGridColumn TItem="Client" Property="Name" Title="Name" />
        <RadzenDataGridColumn TItem="Client" Property="Email" Title="Email" />
        <RadzenDataGridColumn TItem="Client" Property="PhoneNumber" Title="Phone Number" />
        <!-- Add more columns as needed -->
    </Columns>
</RadzenDataGrid>

@code {
    private RadzenDataGrid<Client> grid;
    private IEnumerable<Client> clients;
    private int count;

    protected override async Task OnInitializedAsync()
    {
        await LoadData(new LoadDataArgs { Skip = 0, Top = 10 });
    }

    private async Task LoadData(LoadDataArgs args)
    {
        var result = await ClientService.GetClientsAsync(args.Skip ?? 0, args.Top ?? 10, args.OrderBy, args.Filters);
        clients = result.Data;
        count = result.Count;
    }
}
